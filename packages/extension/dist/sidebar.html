<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Productory Powerups for Gamma</title>
    <link rel="stylesheet" href="sidebar.css" />
  </head>
  <body>
    <div id="sidebar-root">
      <!-- Auth Status Bar (Hidden in Sprint 0) -->
      <div id="auth-status-bar" class="auth-status-bar" style="display: none">
        <div class="auth-status-content">
          <span id="auth-status-icon" class="auth-status-icon">üîí</span>
          <span id="auth-status-text" class="auth-status-text">Working offline</span>
          <button id="auth-login-btn" class="auth-btn auth-login-btn" style="display: none">
            Login
          </button>
          <button id="auth-logout-btn" class="auth-btn auth-logout-btn" style="display: none">
            Logout
          </button>
        </div>
      </div>

      <header class="sidebar-header">
        <div class="header-row">
          <h2 class="title"><span id="timetable-title">Course Timetable</span></h2>
          <span id="duration-badge" class="duration-badge"></span>
          <!-- Sync Status Indicator (Hidden in Sprint 0) -->
          <span id="sync-status" class="sync-status" style="display: none" title="Sync status">
            <span id="sync-icon" class="sync-icon">üì°</span>
          </span>
        </div>
        <div class="header-row" id="functions-toolbar">
          <!-- Toolbar content will be dynamically inserted here -->
        </div>
      </header>
      <main id="sidebar-main" class="sidebar-main">
        <p>Loading slides...</p>
      </main>
      <footer id="sidebar-footer" class="sidebar-footer">
        <!-- Cloud Sync Controls - Simplified UX -->
        <div id="cloud-sync-section" class="cloud-sync-section" style="display: none">
          <div class="sync-main-control">
            <button
              id="cloud-sync-toggle"
              class="sync-btn sync-toggle"
              disabled
              title="Enable cloud sync to keep timetables synced across devices"
            >
              <span class="sync-btn-icon">‚òÅÔ∏è</span>
              <span class="sync-btn-text">Cloud Sync: Off</span>
            </button>
          </div>
          <div class="sync-status-info">
            <span id="sync-status-message" class="sync-status-message">Login to enable cloud sync</span>
            <span id="sync-indicator" class="sync-indicator">‚óè</span>
          </div>
          
          <!-- Advanced Controls (Hidden by default) -->
          <details id="advanced-sync-controls" class="advanced-controls" style="margin-top: 8px;">
            <summary style="font-size: 12px; color: #666; cursor: pointer;">Advanced sync controls</summary>
            <div class="advanced-sync-buttons" style="margin-top: 8px; display: flex; gap: 4px;">
              <button
                id="save-to-cloud-btn"
                class="sync-btn advanced-btn"
                disabled
                title="Manually save current timetable to cloud"
                style="font-size: 11px; padding: 4px 8px;"
              >
                <span class="sync-btn-text">Save Now</span>
              </button>
              <button
                id="load-from-cloud-btn"
                class="sync-btn advanced-btn"
                disabled
                title="Manually load timetable from cloud"
                style="font-size: 11px; padding: 4px 8px;"
              >
                <span class="sync-btn-text">Load Now</span>
              </button>
            </div>
          </details>
        </div>

        <!-- Settings Panel Toggle (Hidden in Sprint 0) -->
        <div id="settings-section" class="settings-section" style="display: none">
          <button id="settings-toggle-btn" class="settings-btn" title="Open settings">
            <span class="settings-icon">‚öôÔ∏è</span>
            <span class="settings-text">Settings</span>
          </button>
        </div>

        <!-- Settings Panel (Hidden in Sprint 0) -->
        <div id="settings-panel" class="settings-panel" style="display: none">
          <div class="settings-content">
            <div class="settings-header">
              <h3>Settings</h3>
              <button id="settings-close-btn" class="settings-close">√ó</button>
            </div>
            <div class="settings-body">
              <!-- User Preferences -->
              <div class="setting-group">
                <h4>Appearance</h4>
                <div class="setting-item">
                  <label for="theme-select">Theme:</label>
                  <select id="theme-select" disabled>
                    <option value="auto">Auto</option>
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                  </select>
                </div>
              </div>

              <!-- Export Preferences -->
              <div class="setting-group">
                <h4>Export</h4>
                <div class="setting-item">
                  <label for="export-format-select">Default Format:</label>
                  <select id="export-format-select">
                    <option value="xlsx">Excel (.xlsx)</option>
                    <option value="csv">CSV (.csv)</option>
                  </select>
                </div>
              </div>

              <!-- Cloud Sync Preferences (Disabled in Sprint 0) -->
              <div class="setting-group">
                <h4>Cloud Sync</h4>
                <div class="setting-item">
                  <label>
                    <input type="checkbox" id="auto-sync-checkbox" disabled />
                    Enable automatic sync
                  </label>
                </div>
                <div class="setting-item">
                  <label for="sync-interval-select">Sync interval:</label>
                  <select id="sync-interval-select" disabled>
                    <option value="300000">5 minutes</option>
                    <option value="600000">10 minutes</option>
                    <option value="1800000">30 minutes</option>
                    <option value="3600000">1 hour</option>
                  </select>
                </div>
              </div>

              <!-- Feature Flags (Development only, hidden by default) -->
              <div id="dev-settings-group" class="setting-group" style="display: none">
                <h4>Development</h4>
                <div class="setting-item">
                  <label>
                    <input type="checkbox" id="debug-mode-checkbox" />
                    Debug mode
                  </label>
                </div>
                <div class="setting-item">
                  <label>
                    <input type="checkbox" id="performance-metrics-checkbox" />
                    Performance metrics
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Essential Status (Clean View) -->
        <div id="essential-status" class="essential-status">
          <div class="status-item">
            <span id="slide-count">12 slides detected</span>
            <span id="connection-status" class="status-indicator">‚úì</span>
          </div>
        </div>

        <!-- Debug info (Progressive disclosure) -->
        <details id="debug-section" class="debug-section" style="margin-top: 8px;">
          <summary style="font-size: 12px; color: #666; cursor: pointer;">Developer details</summary>
          <div id="debug-info" class="debug-info" style="margin-top: 8px; font-size: 11px; color: #555;"></div>
        </details>
      </footer>
    </div>
    <script src="lib/xlsx.full.min.js"></script>
    <script type="module" src="sidebar.js"></script>
  </body>
</html>
