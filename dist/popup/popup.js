import{c,a as i}from"../assets/index.js";let a=!1,s=!1;document.addEventListener("DOMContentLoaded",async function(){console.log("[POPUP] DOMContentLoaded fired"),await r(),u(),d()});async function r(){try{console.log("[POPUP] Initializing Sprint 0 infrastructure..."),await c.initialize(),s=!0,await i.initialize(),a=!0,await l(),console.log("[POPUP] Sprint 0 infrastructure ready - working in offline mode")}catch(t){console.error("[POPUP] Failed to initialize infrastructure:",t)}}function u(){const t=document.getElementById("open-sidebar-btn"),e=document.getElementById("sidebar-status");t&&(t.onclick=async function(){if(chrome.sidePanel&&chrome.sidePanel.open)try{let[n]=await chrome.tabs.query({active:!0,currentWindow:!0});await chrome.sidePanel.open({windowId:n.windowId})}catch(n){e&&(e.textContent="Failed to open side panel: "+n)}else e&&(e.textContent="Side Panel API not available in this version of Chrome.")})}function d(){const t=document.getElementById("popup-login-btn"),e=document.getElementById("popup-dashboard-btn");t&&t.addEventListener("click",async()=>{console.log("[POPUP] Login clicked - Sprint 0 stub"),await i.login()}),e&&e.addEventListener("click",()=>{console.log("[POPUP] Dashboard clicked - Sprint 0 stub")});const n=document.getElementById("popup-sync-now-btn");n&&n.addEventListener("click",async()=>{console.log("[POPUP] Sync now clicked - Sprint 0 stub")});const o=document.getElementById("popup-settings-btn");o&&o.addEventListener("click",()=>{console.log("[POPUP] Settings clicked - Sprint 0 stub")}),console.log("[POPUP] Infrastructure event listeners ready")}async function l(){try{if(!a)return;const t=i.getUIAuthStatus(),e=document.getElementById("popup-auth-icon"),n=document.getElementById("popup-auth-text");e&&n&&(e.textContent=t.status==="offline"?"ðŸ”’":"âœ…",n.textContent=t.message);const o=document.getElementById("popup-sync-indicator");o&&(o.className=`sync-indicator ${t.status}`)}catch(t){console.warn("[POPUP] Could not update auth status:",t)}}
