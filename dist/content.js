function w(){const i=[],r=new Set;return document.querySelectorAll("div.card-wrapper[data-card-id]").forEach((n,c)=>{var d;try{const s=n.getAttribute("data-card-id");if(!s||r.has(s))return;r.add(s);const b=parseInt(n.getAttribute("data-card-depth")||"0",10),l=n.querySelector('.node-heading .heading [data-node-view-content-inner="heading"]'),S=l&&((d=l.textContent)==null?void 0:d.trim())||"",o=[];n.querySelectorAll(".node-paragraph, .node-image, .node-link, .node-list").forEach(e=>{var u;if(e.classList.contains("node-paragraph"))o.push({type:"paragraph",text:((u=e.textContent)==null?void 0:u.trim())||"",subItems:[]});else if(e.classList.contains("node-image")){const t=e.querySelector("img");t&&t.src&&o.push({type:"image",text:t.src,subItems:[]})}else if(e.classList.contains("node-link")){const t=e.querySelector("a");t&&t.href&&o.push({type:"link",text:t.href,subItems:[]})}else e.classList.contains("node-list")&&e.querySelectorAll('div[data-node-view-content-inner="list-item"]').forEach(h=>{var f,y;const m=((y=(f=h.childNodes[0])==null?void 0:f.textContent)==null?void 0:y.trim())||"",p=[],g=h.querySelector('div[data-node-view-content-inner="list"]');g&&g.querySelectorAll('div[data-node-view-content-inner="list-item"]').forEach(x=>{var v;p.push(((v=x.textContent)==null?void 0:v.trim())||"")}),m&&o.push({type:"list_item",text:m,subItems:p})})}),i.push({id:s,title:S,content:o,order:c,level:b})}catch(s){console.error(`Error processing slide ${c}:`,s)}}),i}function A(){let i=0;const r=new MutationObserver(()=>{const a=document.querySelectorAll("div.card-wrapper[data-card-id]");if(a.length&&a.length!==i){i=a.length;const n=w();console.log("Extracted Gamma slides:",n);try{chrome.runtime.sendMessage({type:"GAMMA_SLIDES",slides:n})}catch(c){console.warn("Could not send slide data. Extension context may be invalidated.",c),r.disconnect()}}});r.observe(document.body,{childList:!0,subtree:!0})}window.location.hostname.endsWith("gamma.app")&&A();
