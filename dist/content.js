function x(){const i=[];return document.querySelectorAll("div.card-wrapper[data-card-id]").forEach((t,s)=>{var o;try{const c=t.getAttribute("data-card-id")||`slide-${s}`,v=parseInt(t.getAttribute("data-card-depth")||"0",10),l=t.querySelector('.node-heading .heading [data-node-view-content-inner="heading"]'),b=l&&((o=l.textContent)==null?void 0:o.trim())||"",a=[];t.querySelectorAll(".node-paragraph, .node-image, .node-link, .node-list").forEach(e=>{var d;if(e.classList.contains("node-paragraph"))a.push({type:"paragraph",text:((d=e.textContent)==null?void 0:d.trim())||"",subItems:[]});else if(e.classList.contains("node-image")){const n=e.querySelector("img");n&&n.src&&a.push({type:"image",text:n.src,subItems:[]})}else if(e.classList.contains("node-link")){const n=e.querySelector("a");n&&n.href&&a.push({type:"link",text:n.href,subItems:[]})}else e.classList.contains("node-list")&&e.querySelectorAll('div[data-node-view-content-inner="list-item"]').forEach(u=>{var g,f;const h=((f=(g=u.childNodes[0])==null?void 0:g.textContent)==null?void 0:f.trim())||"",m=[],p=u.querySelector('div[data-node-view-content-inner="list"]');p&&p.querySelectorAll('div[data-node-view-content-inner="list-item"]').forEach(S=>{var y;m.push(((y=S.textContent)==null?void 0:y.trim())||"")}),h&&a.push({type:"list_item",text:h,subItems:m})})}),i.push({id:c,title:b,content:a,order:s,level:v})}catch(c){console.warn("Failed to extract slide",s,c)}}),i}function w(){let i=0;const r=new MutationObserver(()=>{const t=document.querySelectorAll("div.card-wrapper[data-card-id]");if(t.length&&t.length!==i){i=t.length;const s=x();console.log("Extracted Gamma slides:",s);try{chrome.runtime.sendMessage({type:"GAMMA_SLIDES",slides:s})}catch(o){console.warn("Could not send slide data. Extension context may be invalidated.",o),r.disconnect()}}});r.observe(document.body,{childList:!0,subtree:!0})}window.location.hostname.endsWith("gamma.app")&&w();
